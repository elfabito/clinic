{% extends "layout.html" %}
{% load static %}
{% block body %}

{% if message %}
<div>{{ message }}</div>
{% endif %}
<div class="container-fluid" style=" padding: 35px 35px 0px 25px;">

    <p class="fs-2">Profile {{doctor.user.first_name}} </p>
    <table class="table">

        <tbody>
            <tr id="tname">
                <th scope="row">Name :</th>
                <td id="fname">{{doctor.user.first_name}}</td>
                <td colspan="2" id="nbutton"><button id="buttonEditN" style="float: right;" class="btn btn-secondary"
                        onclick="editFirst()">
                        Edit </button></td>
            </tr>
            <tr id="tlast">
                <th scope="row">Last Name :</th>
                <td id="lname">{{doctor.user.last_name}}</td>
                <td colspan="2" id="lbutton"><button id="buttonEditL" style="float: right;" class="btn btn-secondary"
                        onclick="editLast()">
                        Edit </button></td>
            </tr>
            <tr id="tgender">
                <th scope="row">Gender :</th>
                <td colspan="1" id="gender">{{doctor.gender}}</td>
                <td colspan="2" id="gbutton"><button id="buttonEditG" style="float: right;" class="btn btn-secondary"
                        onclick="editGender()">
                        Edit </button></td>
            </tr>
            <tr id=" tphone">
                <th scope="row">Phone :</th>
                <td colspan="1" id="pphone">{{doctor.phone}}</td>
                <td colspan="2" id="tbutton"><button id="buttonEdit" style="float: right;" class="btn btn-secondary"
                        onclick="editPhone()">
                        Edit </button></td>

            </tr>

            <tr id=" tavailable">
                <th scope="row">Available :</th>

                <td colspan="1" id="available">

                    <div id="availabledata">
                        {% if daytime.lunes %}
                        Lunes : {% for time in daytime.lunes %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.martes %}
                        Martes : {% for time in daytime.martes %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.miercoles %}
                        Miercoles : {% for time in daytime.miercoles %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.jueves %}
                        Jueves : {% for time in daytime.jueves %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.viernes %}
                        Viernes : {% for time in daytime.viernes %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.sabado %}
                        Sabado : {% for time in daytime.sabado %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}

                        {%endif%}


                    </div>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="option"
                        id="lunes">
                        <option value="">--Lunes--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionm"
                        id="martes">
                        <option value="">--Martes--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionmi"
                        id="miercoles">
                        <option value="">--Miercoles--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionj"
                        id="jueves">
                        <option value="">--Jueves--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionv"
                        id="viernes">
                        <option value="">--Viernes--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="options"
                        id="sabado">
                        <option value="">--Sabado--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>

                </td>



                <td colspan="2" id="abutton"><button id="buttonEditA" style="float: right;" class="btn btn-secondary"
                        onclick="editAvailable()"> Edit </button></td>


                <span id="error"></span>
            </tr>


            <tr id=" tposition">
                <th scope="row">Position :</th>
                <td colspan="1" id="position">{{doctor.position}}</td>
                <td colspan="2" id="pbutton"><button id="buttonEditP" style="float: right;" class="btn btn-secondary"
                        onclick="editPosition()"> Edit </button></td>


            </tr>
            <tr id=" tdescription">
                <th scope="row">Description :</th>
                <td colspan="1" id="description">{{doctor.description}}</td>
                <td colspan="2" id="dbutton"><button id="buttonEditD" style="float: right;" class="btn btn-secondary"
                        onclick="editDescription()"> Edit </button></td>

            </tr>
        </tbody>
    </table>
</div>
<div>
    <div style="padding: 35px 0 35px 35px">
        <h5>Nexts Appointments</h5>
    </div>
    {% if appointment.length != 0 %}
    {% for appoint in appointment %}
    {% if appoint.approved %}

    <div class="d-flex flex-wrap " style=" align-items: center;text-align: center; padding: 25px;">
        <div>

            <div class=" card" style="width: 18rem;margin: 8px;">


                <div class="card-body">
                    <h5 class="card-title">Reserva de {{appoint.patient}} </h5>
                    <p class="card-text">Patient Phone : {{appoint.patient.phone}}</p>
                    <p class="card-text">Patient email : {{appoint.patient.user.email}}</p>
                    <p class="card-text">Comments : {{appoint.comment}}</p>
                    <p>{{appoint.datetime}}</p>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        Cancel Appointment
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Appointment</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    If you continue is not going back , you are going to cancel de session.
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="button" onclick="cancelAppoint({{appoint.id}})"
                                        class="btn btn-primary">Cancel
                                        Appointment</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    {% endif %}
    {%endfor%}

    <div style="padding: 35px 0 35px 35px">
        <h5>Appointments for approve</h5>
    </div>
    {% for appoint in appointment %}
    {% if not appoint.approved%}
    <div class="d-flex flex-wrap " style="align-items: center;padding: 25px;; text-align: center;">
        <div style="background-color: brown;">

            <div class=" card" style="width: 18rem;margin: 8px;">


                <div class="card-body">
                    <h6 class="card-title">Reserva de {{appoint.patient}} ( Esperando por aprobar... )</h6>
                    <p class="card-text">Patient Phone : {{appoint.patient.phone}}</p>
                    <p class="card-text">Patient email : {{appoint.patient.user.email}}</p>
                    <p class="card-text">Comments : {{appoint.comment}}</p>
                    <p>{{appoint.datetime}}</p>
                    <a onclick="approved({{appoint.id}})" class="btn btn-primary">Approve appointmtent</a>

                </div>
            </div>


            {% endif %}
            {%endfor%}


        </div>
    </div>
    {%else%}

    <div> No Appoinment Found </div>

    {%endif%}

</div>
</div>









{% endblock %}