{% extends "layout.html" %}
{% load static %}
{% block body %}
<!-- <div class="input-group">
    <span class="input-group-text">First and last name</span>
    <p class="h6">{{patient.user.first_name}} </p>
    <p class="h6"> </p>
</div>
 <div class="input-group">
    <span class="input-group-text">Gender</span>
    <select class="form-select" aria-label="Default select example">
        <option selected>Gender</option>
        <option value="1">Male</option>
        <option value="2">Female</option>
        <option value="3">Dont want to say</option>
    </select>
</div> -->
{% if message %}
<div>{{ message }}</div>
{% endif %}
<div class="container-xl" style=" padding: 25px;">

    <p class="fs-2">Profile {{doctor.user.first_name}} </p>
    <table class="table">
        <!-- <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">First</th>
                <th scope="col">Last</th>
                <th scope="col">Handle</th>
            </tr>
        </thead> -->
        <tbody>
            <tr id="tname">
                <th scope="row">Name :</th>
                <td id="fname">{{doctor.user.first_name}}</td>
                <td colspan="2" id="nbutton"><button id="buttonEditN" class="btn btn-secondary" onclick="editFirst()">
                        Edit </button></td>
            </tr>
            <tr id="tlast">
                <th scope="row">Last Name :</th>
                <td id="lname">{{doctor.user.last_name}}</td>
                <td colspan="2" id="lbutton"><button id="buttonEditL" class="btn btn-secondary" onclick="editLast()">
                        Edit </button></td>
            </tr>
            <tr id="tgender">
                <th scope="row">Gender :</th>
                <td colspan="1" id="gender">{{doctor.gender}}</td>
                <td colspan="2" id="gbutton"><button id="buttonEditG" class="btn btn-secondary" onclick="editGender()">
                        Edit </button></td>
            </tr>
            <tr id=" tphone">
                <th scope="row">Phone :</th>
                <td colspan="1" id="pphone">{{doctor.phone}}</td>
                <td colspan="2" id="tbutton"><button id="buttonEdit" class="btn btn-secondary" onclick="editPhone()">
                        Edit </button></td>
                <span id="error"></span>
            </tr>

            <tr id=" tavailable">
                <th scope="row">Available :</th>

                <td colspan="1" id="available">
                    <!-- {{daytime| safe }} -->
                    <div id="availabledata">
                        {% if daytime.lunes %}
                        Lunes : {% for time in daytime.lunes %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.martes %}
                        Martes : {% for time in daytime.martes %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.miercoles %}
                        Miercoles : {% for time in daytime.miercoles %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.jueves %}
                        Jueves : {% for time in daytime.jueves %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.viernes %}
                        Viernes : {% for time in daytime.viernes %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}
                        <br>
                        {%endif%}

                        {% if daytime.sabado %}
                        Sabado : {% for time in daytime.sabado %}
                        {{time | safe }}
                        &nbsp&nbsp&nbsp
                        {%endfor%}

                        {%endif%}


                    </div>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="option"
                        id="lunes">
                        <option value="">--Lunes--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionm"
                        id="martes">
                        <option value="">--Martes--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionmi"
                        id="miercoles">
                        <option value="">--Miercoles--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionj"
                        id="jueves">
                        <option value="">--Jueves--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="optionv"
                        id="viernes">
                        <option value="">--Viernes--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <select class="form-select form-select-lg mb-3" style="text-align: center;" multiple name="options"
                        id="sabado">
                        <option value="">--Sabado--</option>
                        <option value="09:00 – 10:00">09:00 – 10:00</option>
                        <option value="10:00 – 11:00">10:00 – 11:00</option>
                        <option value="11:00 – 12:00">11:00 – 12:00</option>
                        <option value="13:00 – 14:00">13:00 – 14:00</option>
                        <option value="14:00 – 15:00">14:00 – 15:00</option>
                        <option value="15:00 – 16:00">15:00 – 16:00</option>
                        <option value="16:00 – 17:00">16:00 – 17:00</option>
                        <option value="17:00 – 18:00">17:00 – 18:00</option>
                        <option value="18:00 – 19:00">18:00 – 19:00</option>
                    </select>
                    <!-- <form  action="" method="post">{{form2.as_p}}</form> -->
                    <!-- <div id="timeform" class="ui slider checkbox">
                        {% for value, text in form.available.field.choices %}
                        <form id="formavailable">
                            <input id="available_{{ forloop.counter0 }}" name="{{ form.available.name }}"
                                type="checkbox" value="{{ text }}" {% if value in checked_available %} checked="checked"
                                {% endif %}>
                            <label>{{ text }}</label>
                        </form>
                        {% endfor %}

                    </div> -->
                </td>



                <td colspan="2" id="abutton"><button id="buttonEditA" class="btn btn-secondary"
                        onclick="editAvailable()"> Edit </button></td>


                <span id="error"></span>
            </tr>


            <tr id=" tposition">
                <th scope="row">Position :</th>
                <td colspan="1" id="position">{{doctor.position}}</td>
                <td colspan="2" id="pbutton"><button id="buttonEditP" class="btn btn-secondary"
                        onclick="editPosition()"> Edit </button></td>
                <!-- <label for="specialist" for="specialist">Especialista</label>
                <select class="form-control" name="specialist" id="specialist">
                    <option value="kinesiologia">Kiniesologia</option>
                    <option value="masajista">Masajista</option>
                    <option value="quiropraxia">Quiropraxia</option>
                    <option value="otro">Otro</option>

                </select> -->
                <span id="error"></span>
            </tr>
            <tr id=" tdescription">
                <th scope="row">Description :</th>
                <td colspan="1" id="description">{{doctor.description}}</td>
                <td colspan="2" id="dbutton"><button id="buttonEditD" class="btn btn-secondary"
                        onclick="editDescription()"> Edit </button></td>
                <span id="error"></span>
            </tr>
        </tbody>
    </table>
</div>
<div style="display: flex;flex-wrap: wrap;justify-content: space-between; text-align: center; padding: 25px;">
    {% if appointment.length != 0 %}
    {% for appoint in appointment %}
    {% if appoint.approved %}
    <div>
        <div>

            <div class="card" style="width: 18rem;margin: 8px;">


                <div class="card-body">
                    <h5 class="card-title">Reserva de {{appoint.patient}} </h5>
                    <p class="card-text">Patient Phone : {{appoint.patient.phone}}</p>
                    <p class="card-text">Patient email : {{appoint.patient.user.email}}</p>
                    <p class="card-text">Comments : {{appoint.comment}}</p>
                    <p>{{appoint.datetime}}</p>
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        Cancel Appointment
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Appointment</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    If you continue is not going back , you are going to cancel de session.
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="button" onclick="deleteAppoint({{appoint.id}})"
                                        class="btn btn-primary">Cancel Appointment</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        {% endif %}
        {%endfor%}

        {% for appoint in appointment %}
        {% if not appoint.approved%}
        <div>

            <div class="card" style="width: 18rem;margin: 8px;">


                <div class="card-body">
                    <h6 class="card-title">Reserva de {{appoint.patient}} ( Esperando por aprobar... )</h6>
                    <p class="card-text">Patient Phone : {{appoint.patient.phone}}</p>
                    <p class="card-text">Patient email : {{appoint.patient.user.email}}</p>
                    <p class="card-text">Comments : {{appoint.comment}}</p>
                    <p>{{appoint.datetime}}</p>
                    <a onclick="approved({{appoint.id}})" class="btn btn-primary">Approve appointmtent</a>

                </div>
            </div>


            {% endif %}
            {%endfor%}


        </div>
        {%else%}

        <div> No Appoinment Found </div>

        {%endif%}

    </div>
</div>









{% endblock %}